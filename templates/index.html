<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Waste Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #ffffff;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }
        th, td {
            border: 1px solid #333;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #1f1f1f;
        }
        tr:nth-child(even) {
            background-color: #1a1a1a;
        }
        input, select, button {
            background-color: #1f1f1f;
            color: #e0e0e0;
            border: 1px solid #333;
            padding: 5px 10px;
            margin: 5px 0;
        }
        button {
            cursor: pointer;
        }
        canvas {
            background-color: #1f1f1f;
            border-radius: 8px;
            padding: 10px;
        }
    </style>
</head>
<body>
    <h1>Waste Tracker</h1>

    <!-- Example summary table -->
    <table>
        <thead>
            <tr>
                <th>Business</th>
                <th>Stream</th>
                <th>Quantity</th>
            </tr>
        </thead>
        <tbody>
            {% for row in summary %}
            <tr>
                <td>{{ row[0] }}</td>
                <td>{{ row[1] }}</td>
                <td>{{ row[2] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>Monthly Totals: {{ total }}</h2>

    <!-- Chart.js chart -->
    <canvas id="wasteChart" width="400" height="200"></canvas>
    <script>
    const ctx = document.getElementById('wasteChart').getContext('2d');
    const wasteChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: {{ stream_totals.keys()|list|tojson }},
            datasets: [{
                label: 'Waste Quantity',
                data: {{ stream_totals.values()|list|tojson }},
                backgroundColor: 'rgba(0, 200, 255, 0.8)',
                borderColor: 'rgba(0, 200, 255, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    labels: {
                        color: '#e0e0e0' // legend text
                    }
                }
            },
            scales: {
                x: {
                    ticks: { color: '#e0e0e0' },
                    grid: { color: '#333' }
                },
                y: {
                    ticks: { color: '#e0e0e0' },
                    grid: { color: '#333' },
                    beginAtZero: true
                }
            }
        }
    });
    </script>
</body>
</html>
